---
title: Executing CLI Tools
---

import ToolConfirmation from '@site/src/components/ToolConfirmation';

<ToolConfirmation />

Interacting with third-party command-line interface tools (CLIs) is an essential task in build automation. This includes a wide range of aspects, such as resolution of the tool path, construction of arguments to be passed, evaluation of the exit code and capturing of standard and error output. NUKE hides these concerns in dedicated auto-generated CLI wrappers.

<details>
<summary>Exhaustive list of supported tools</summary>

| Tool                                                                                                      | Supported Commands                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|:----------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [AzureSignTool](https://github.com/vcsjones/AzureSignTool)                                                | `sign`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [BenchmarkDotNet](https://benchmarkdotnet.org/)                                                           | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Boots](https://github.com/jonathanpeppers/boots)                                                         | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Chocolatey](https://chocolatey.org/)                                                                     | `find`, `list`, `new`, `outdated`, `pack`, `push`, `search`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [CloudFoundry](https://docs.cloudfoundry.org/cf-cli/cf-help.html)                                         | `api`, `auth`, `bind-service`, `bind-service`, `create-route`, `create-service`, `create-space`, `cups`, `curl`, `delete`, `delete-service`, `delete-space`, `login`, `map-route`, `push`, `restage`, `restart`, `scale -f`, `service`, `set-env`, `set-env`, `start`, `stop`, `target`, `unmap-route`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [Codecov](https://about.codecov.io/)                                                                      | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [CodeMetrics](https://docs.microsoft.com/en-us/visualstudio/code-quality/code-metrics-values)             | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [CorFlags](https://docs.microsoft.com/en-us/dotnet/framework/tools/corflags-exe-corflags-conversion-tool) | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [CoverallsNet](https://coverallsnet.readthedocs.io)                                                       | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Coverlet](https://github.com/tonerdo/coverlet/)                                                          | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [DocFX](https://dotnet.github.io/docfx/)                                                                  | `build`, `dependency`, `download`, `help`, `init`, `merge`, `metadata`, `pdf`, `serve`, `template`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [Docker](https://www.docker.com/)                                                                         | `attach`, `build`, `builder`, `builder build`, `builder prune`, `buildx build`, `checkpoint`, `checkpoint create`, `checkpoint ls`, `checkpoint rm`, `commit`, `config`, `config create`, `config inspect`, `config ls`, `config rm`, `container`, `container attach`, `container commit`, `container create`, `container diff`, `container exec`, `container export`, `container inspect`, `container kill`, `container logs`, `container ls`, `container pause`, `container port`, `container prune`, `container rename`, `container restart`, `container rm`, `container run`, `container start`, `container stats`, `container stop`, `container top [ps`, `container unpause`, `container update`, `container wait`, `context`, `context create`, `context export`, `context import`, `context inspect`, `context ls`, `context rm`, `context update`, `context use`, `create`, `deploy`, `diff`, `engine`, `engine activate`, `engine check`, `engine update`, `events`, `exec`, `export`, `history`, `image`, `image build`, `image history`, `image import`, `image inspect`, `image load`, `image ls`, `image prune`, `image pull`, `image push`, `image rm`, `image save`, `image tag`, `images`, `import`, `info`, `inspect`, `kill`, `load`, `login`, `logout`, `logs`, `manifest`, `manifest annotate`, `manifest create`, `manifest inspect`, `manifest push`, `network`, `network connect`, `network create`, `network disconnect`, `network inspect`, `network ls`, `network prune`, `network rm`, `node`, `node demote`, `node inspect`, `node ls`, `node promote`, `node ps`, `node rm`, `node update`, `pause`, `plugin`, `plugin create`, `plugin disable`, `plugin enable`, `plugin inspect`, `plugin install`, `plugin ls`, `plugin push`, `plugin rm`, `plugin set`, `plugin upgrade`, `port`, `ps`, `pull`, `push`, `rename`, `restart`, `rm`, `rmi`, `run`, `save`, `search`, `secret`, `secret create`, `secret inspect`, `secret ls`, `secret rm`, `service`, `service create`, `service inspect`, `service logs`, `service ls`, `service ps`, `service rm`, `service rollback`, `service scale`, `service update`, `stack`, `stack deploy`, `stack ls`, `stack ps`, `stack rm`, `stack services`, `start`, `stats`, `stop`, `swarm`, `swarm ca`, `swarm init`, `swarm join HOST:PORT`, `swarm join-token`, `swarm leave`, `swarm unlock`, `swarm unlock-key`, `swarm update`, `system`, `system df`, `system events`, `system info`, `system prune`, `tag`, `top [ps`, `trust`, `trust inspect`, `trust key`, `trust key generate`, `trust key load`, `trust revoke`, `trust sign IMAGE:TAG`, `trust signer`, `trust signer add`, `trust signer remove`, `unpause`, `update`, `version`, `volume`, `volume create`, `volume inspect`, `volume ls`, `volume prune`, `volume rm`, `wait` |
| [DotCover](https://www.jetbrains.com/dotcover)                                                            | `analyse`, `cover`, `delete`, `dotnet`, `merge`, `report`, `zip`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [DotNet](https://docs.microsoft.com/en-us/dotnet/core/tools/)                                             | `build`, `clean`, `msbuild`, `nuget add source`, `nuget push`, `pack`, `publish`, `restore`, `run`, `test`, `tool install`, `tool restore`, `tool uninstall`, `tool update`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [EntityFramework](https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/dotnet)                      | `ef database drop`, `ef database update`, `ef dbcontext info`, `ef dbcontext list`, `ef dbcontext scaffold`, `ef dbcontext script`, `ef migrations add`, `ef migrations list`, `ef migrations remove`, `ef migrations script`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [Fixie](https://fixie.github.io/)                                                                         | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [GitLink](https://github.com/GitTools/GitLink/)                                                           | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [GitReleaseManager](https://gitreleasemanager.readthedocs.io)                                             | `addasset`, `close`, `create`, `export`, `publish`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [GitVersion](http://gitversion.readthedocs.io/en/stable/)                                                 | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Helm](https://helm.sh/)                                                                                  | `completion`, `create`, `delete`, `dependency build`, `dependency list`, `dependency update`, `fetch`, `get`, `get hooks`, `get manifest`, `get notes`, `get values`, `history`, `home`, `init`, `inspect`, `inspect chart`, `inspect readme`, `inspect values`, `install`, `lint`, `list`, `package`, `plugin install`, `plugin list`, `plugin remove`, `plugin update`, `repo add`, `repo index`, `repo list`, `repo remove`, `repo update`, `reset`, `rollback`, `search`, `serve`, `status`, `template`, `test`, `upgrade`, `verify`, `version`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [ILRepack](https://github.com/gluck/il-repack#readme)                                                     | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [InnoSetup](http://www.jrsoftware.org/isinfo.php)                                                         | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Kubernetes](https://kubernetes.io/)                                                                      | `alpha`, `annotate`, `api-resources`, `api-versions`, `apply`, `apply -k`, `attach`, `auth`, `autoscale`, `certificate`, `cluster-info`, `completion`, `config`, `convert`, `cordon`, `cp`, `create`, `delete`, `describe`, `drain`, `edit`, `exec`, `explain`, `expose`, `get`, `kubectl`, `label`, `logs`, `options`, `patch`, `plugin`, `port-forward`, `proxy`, `replace`, `rolling-update`, `rollout`, `run`, `run-container`, `scale`, `set`, `taint`, `top`, `uncordon`, `version`, `wait`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [MauiCheck](https://github.com/Redth/dotnet-maui-check)                                                   | `config`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [MinVer](https://github.com/adamralph/minver)                                                             | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [MSBuild](https://msdn.microsoft.com/en-us/library/ms164311.aspx)                                         | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [MSpec](https://github.com/machine/machine.specifications)                                                | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [NerdbankGitVersioning](https://github.com/AArnott/Nerdbank.GitVersioning)                                | `cloud`, `get-commits`, `get-version`, `install`, `prepare-release`, `set-version`, `tag`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [Netlify](https://docs.netlify.com/cli/get-started/)                                                      | `netlify deploy`, `netlify sites:create`, `netlify sites:delete`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [Npm](https://www.npmjs.com/)                                                                             | `ci`, `install`, `run`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [NSwag](https://github.com/RSuter/NSwag)                                                                  | `aspnetcore2openapi`, `aspnetcore2swagger`, `jsonschema2csclient`, `jsonschema2tsclient`, `list-controllers`, `list-types`, `new`, `openapi2csclient`, `openapi2cscontroller`, `openapi2tsclient`, `run`, `swagger2csclient`, `swagger2cscontroller`, `swagger2tsclient`, `types2openapi`, `types2swagger`, `version`, `webapi2openapi`, `webapi2swagger`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [NuGet](https://docs.microsoft.com/en-us/nuget/tools/nuget-exe-cli-reference)                             | `install`, `pack`, `push`, `restore`, `sources add`, `sources disable`, `sources enable`, `sources list`, `sources remove`, `sources update`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [NUnit](https://www.nunit.org/)                                                                           | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Octopus](https://octopus.com/)                                                                           | `build-information`, `create-release`, `deploy-release`, `pack`, `push`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [OctoVersion](https://github.com/OctopusDeploy/OctoVersion)                                               | `octoversion`, `octoversion`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [OpenCover](https://github.com/OpenCover/opencover)                                                       | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Paket](https://fsprojects.github.io/paket)                                                               | `pack`, `push`, `restore`, `update`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [PowerShell](https://docs.microsoft.com/en-us/powershell/)                                                | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Pulumi](https://www.pulumi.com/)                                                                         | `config`, `config cp`, `config get`, `config refresh`, `config rm`, `config set`, `destroy`, `new`, `preview`, `stack`, `stack change-secrets-provider`, `stack export`, `stack graph`, `stack history`, `stack import`, `stack init`, `stack ls`, `stack output`, `stack rename`, `stack rm`, `stack select`, `stack tag get`, `stack tag ls`, `stack tag rm`, `stack tag set`, `up`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [ReportGenerator](https://github.com/danielpalme/ReportGenerator)                                         | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [ReSharper](https://www.jetbrains.com/help/resharper/ReSharper_Command_Line_Tools.html)                   | `cleanupcode`, `dupfinder`, `inspectcode`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [SignClient](https://discoverdot.net/projects/sign-service)                                               | `sign`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [SignTool](https://docs.microsoft.com/en-us/dotnet/framework/tools/signtool-exe)                          | `sign`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [SonarScanner](https://www.sonarqube.org/)                                                                | `begin`, `end`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [SpecFlow](https://specflow.org/)                                                                         | `buildserverrun`, `mstestexecutionreport`, `nunitexecutionreport`, `register`, `register`, `register`, `run`, `stepdefinitionreport`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [Squirrel](https://github.com/Squirrel/Squirrel.Windows)                                                  | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [TestCloud](https://developer.xamarin.com/guides/testcloud/)                                              | `submit`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [Unity](https://unity3d.com/)                                                                             | `-createManualActivationFile`, `-returnlicense`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [VSTest](https://msdn.microsoft.com/en-us/library/jj155796.aspx)                                          | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [VSWhere](https://github.com/Microsoft/vswhere)                                                           | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [WebConfigTransformRunner](https://github.com/erichexter/WebConfigTransformRunner)                        | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [Xunit](https://xunit.github.io)                                                                          | _Single top-level command_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

</details>

You can execute MSBuild using the [lightweight API](#lightweight-api) as follows:

```csharp
MSBuildTasks.MSBuild($"{SolutionFile} /target:Rebuild /p:Configuration={Configuration} /nr:false");
```

The returned object is a collection of standard and error output.

:::info
Many CLI tasks require to add a package reference to the build project file. For instance, when using `NUnitTasks` there should be one of the following entries to ensure the tool is available:

<Tabs>
  <TabItem value="package-reference" label="PackageReference" default>

```xml title="_build.csproj"
<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <PackageReference Include="NUnit.ConsoleRunner" Version="3.9.0" ExcludeAssets="all" />
  </ItemGroup>

</Project>
```

  </TabItem>
  <TabItem value="package-download" label="PackageDownload" default>

```xml title="_build.csproj"
<Project Sdk="Microsoft.NET.Sdk">

  <ItemGroup>
    <PackageDownload Include="NUnit.ConsoleRunner" Version="[3.9.0]" />
  </ItemGroup>

</Project>
```

  </TabItem>
</Tabs>

While it would be possible to magically download required packages, this explicit approach ensures that your builds are reproducible at any time. If a package is not referenced, the resulting error message will include a command to [install the package via the global tool](../06-global-tool/01-packages.md).
:::

## Fluent API

While the example from above is quite easy to understand, it also illustrates certain weaknesses. What if `SolutionFile` contains a space and must be quoted? What is the separator to pass multiple targets? Is the configuration actually passed as a dedicated argument or as an MSBuild property? What does the `/nr` switch stand for? To solve these issues, you can use the individual fluent interfaces:

```csharp
MSBuildTasks.MSBuild(_ => _
    .SetTargetPath(SolutionFile)
    .SetTargets("Clean", "Build")
    .SetConfiguration(Configuration)
    .EnableNodeReuse());
```

You can also use the fluent interfaces to manipulate the process invocation, including tool path, arguments, working directory, timeout and environment variables.

:::info
All fluent interfaces implement a variation of the [builder pattern](https://en.wikipedia.org/wiki/Builder_pattern), in which every fluent call will create an immutable copy of the current `ToolSettings` instance with the intended changes applied. This enables great flexibility in composing similar process invocations.
:::

<!-- TODO: website -->
<!-- Using any IDE, an individual fluent interface can easily be discovered via code completion. Most importantly, you can look up the original documentation right from where you are: -->

### Conditional Modifications

In some cases, you may want to apply certain options only when a particular condition is met. This can be done fluently too, by using the `When` extension:

```csharp
DotNetTasks.DotNetTest(_ => _
    .SetProjectFile(ProjectFile)
    .SetConfiguration(Configuration)
    .EnableNoBuild()
    .When(PublishTestResults, _ => _
        .SetLogger("trx")
        .SetResultsDirectory(TestResultsDirectory)));
```

### Combinatorial Modifications

A typical situation when using MSBuild for compilation, is to compile for different configurations, target frameworks or runtimes. You can use the `CombineWith` method to create different combinations for invocation:

```csharp
var publishCombinations =
    from project in new[] { FirstProject, SecondProject }
    from framework in project.GetTargetFrameworks()
    from runtime in new[] { "win10-x86", "osx-x64", "linux-x64" }
    select new { project, framework, runtime };

DotNetTasks.DotNetPublish(_ => _
    .EnableNoRestore()
    .SetConfiguration(Configuration)
    .CombineWith(publishCombinations, (_, v) => _
        .SetProject(v.project)
        .SetFramework(v.framework)
        .SetRuntime(v.runtime)));
```

### Multiple Invocations

Based on [combinatorial modifications](#combinatorial-modifications) it is possible to set a `degreeOfParallelism` (default `1`) and a flag to `continueOnFailure` (default `false`):

```csharp
DotNetTasks.DotNetNuGetPush(_ => _
        .SetSource(Source)
        .SetSymbolSource(SymbolSource)
        .SetApiKey(ApiKey)
        .CombineWith(
            OutputDirectory.GlobFiles("*.nupkg").NotEmpty(), (_, v) => _
                .SetTargetPath(v)),
    degreeOfParallelism: 5,
    continueOnFailure: true);
```

This example will always have 5 packages being pushed simultaneously. Possible exceptions, for instance when a package already exists, are accumulated to an `AggregateException` and thrown when all invocations have been processed. The console output is buffered until all invocations are completed.

### Custom Arguments

It may happen that certain arguments are not available from the fluent interface. In this case, the `SetProcessAdditionalArguments` or `AddProcessAdditionalArguments` methods can be used to add them manually:

```csharp
MSBuildTasks.MSBuild(_ => _
    .SetTargetPath(SolutionFile)
    .SetProcessAdditionalArguments( "/r" ));
```

If secrets are involved, add them with the `AddProcessRedactedSecrets` first:

```csharp
SonarScannerTasks.SonarScannerBegin(_ => _
    .AddProcessRedactedSecrets( Secrets.SonarQubeAccessToken )
    .AddProcessAdditionalArguments( $"/d:sonar.login={Secrets.SonarQubeAccessToken}" ));
```

<!--
    SetToolPath
    SetWorkingDirectory
    SetExecutionTimeout
    SetEnvironmentVariables
    LogOutput
    When
    SetProcessAdditionalArguments
    AddProcessAdditionalArguments
    AddProcessRedactedSecrets
-->

### Exit Code Handling

By default, every invocation is asserted to have a zero exit code. However, you can also overwrite this behavior using `SetProcessExitHandler` when required:


<Tabs>
  <TabItem value="switch-expressions" label="Switch&nbsp;Expressions" default>

```csharp
NUnitTasks.NUnit3(_ => _
    .SetInputFiles(Assemblies)
    .SetProcessExitHandler(p => p.ExitCode switch
    {
        -1 => throw new Exception("Invalid args"),
        >0 => throw new Exception($"{p.ExitCode} tests have failed"),
        _ => null
    }));
```

  </TabItem>
  <TabItem value="switch-statements" label="Switch&nbsp;Statements">

```csharp
NUnitTasks.NUnit3(_ => _
    .SetInputFiles(Assemblies)
    .SetProcessExitHandler(p =>
    {
        switch (p.ExitCode)
        {
            case -1:
                throw new Exception("Invalid args");
            case >0:
                throw new Exception($"{p.ExitCode} tests have failed");
        }
    }));
```

  </TabItem>
</Tabs>



As a shorthand syntax, you can also disable the default assertion of a zero exit code, which essentially sets an empty delegate as the exit handler:

```csharp
NUnitTasks.NUnit3(_ => _
    .SetInputFiles(Assemblies)
    .DisableProcessAssertZeroExitCode());
```






### Verbosity Mapping

Using the `VerbosityMappingAttribute`, it is possible to automatically map the verbosity passed via `--verbosity` to individual tools. The attribute must be applied on the build class level:

```csharp
[VerbosityMapping(typeof(MSBuildVerbosity),
    Quiet = nameof(MSBuildVerbosity.Quiet),
    Minimal = nameof(MSBuildVerbosity.Minimal),
    Normal = nameof(MSBuildVerbosity.Normal),
    Verbose = nameof(MSBuildVerbosity.Detailed))]
class Build : NukeBuild
{
    // ...
}
```

## Lightweight API

Many of the most popular tools are already implemented. In case a certain tool is not yet supported with a proper CLI task class, NUKE allows you to use the following **injection attributes** to load them:

<!-- snippet: tool-invocation-lightweight -->
```csharp
[PathVariable]
readonly Tool Git;

[NuGetPackage(
    packageId: "Redth.Net.Maui.Check",
    packageExecutable: "MauiCheck.dll",
    // Must be set for tools shipping multiple versions
    Framework = "net6.0")]
readonly Tool MauiCheck;

// Relative to root directory or absolute path
[LocalPath("./tools/corflags.exe")]
readonly Tool CorFlags;

// Different path on Windows and Unix
[LocalPath(
    windowsPath: "gradlew.bat",
    unixPath: "gradlew")]
readonly Tool Gradle;
```
<!-- endSnippet -->

The injected `Tool` delegate allows passing arguments, working directory, environment variables and many more process-specific options:

<!-- snippet: tool-invocation-lightweight-usage -->
```csharp
// Pass arguments with string interpolation
Git($"checkout -b {Branch}");

// Change working directory and environment variables
CorFlags(
    arguments: $"...",
    workingDirectory: SourceDirectory,
    environmentVariables: EnvironmentInfo.Variables
        .ToDictionary(x => x.Key, x => x.Value)
        .SetKeyValue("key", "value").AsReadOnly());

// Only execute when available
// Requires: <PackageDownload Include="Redth.Net.Maui.Check" Version="0.10.0" />
MauiCheck?.Invoke($"--fix --preview");
```
<!-- endSnippet -->
